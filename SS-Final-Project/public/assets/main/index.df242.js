window.__require=function t(e,o,n){function i(c,a){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return i(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({BackgroundScroll:[function(t,e,o){"use strict";cc._RF.push(e,"b6a54s2WYZDYrc5MQKhkNBH","BackgroundScroll");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=0,e.bgwidth=0,e}return i(e,t),e.prototype.update=function(t){var e=this.node.x;(e-=this.speed*t)<=-this.bgwidth&&(e+=2*this.bgwidth),this.node.x=e},r([s(Number)],e.prototype,"speed",void 0),r([s(Number)],e.prototype,"bgwidth",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],"Bullet enemy":[function(t,e,o){"use strict";cc._RF.push(e,"9fc38gv7SpE+oYOIbXb5WMv","Bullet enemy");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stageManager=null,e}return i(e,t),e.prototype.onLoad=function(){var t=cc.find("StageManager");this.stageManager=t.getComponent("StageManager")},e.prototype.onBeginContact=function(t,e,o){var n=o.node.group;"boundary"===n?this.stageManager.bulletPool.put(this.node):"player"===n&&this.stageManager.bulletPool.put(this.node)},r([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],Bullet:[function(t,e,o){"use strict";cc._RF.push(e,"f3634VLsdxNHaV1E/BCKKFc","Bullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.bulletManager=null,e.attack=0,e.isTriggered=!1,e}return i(e,t),e.prototype.init=function(t,e,o){this.anim=this.getComponent(cc.Animation),this.setInitPos(t),this.anim.play(e),this.attack=o},e.prototype.reuse=function(t){this.bulletManager=t,this.isTriggered=!1},e.prototype.setInitPos=function(t){this.node.parent=t.parent,t.scaleX>0?(this.node.position=cc.v3(55,0),this.node.scaleX=1):(this.node.position=cc.v3(-62,8),this.node.scaleX=-1),this.node.position=this.node.position.addSelf(t.position)},e.prototype.bulletMove=function(){var t,e=this;t=this.node.scaleX>0?cc.moveBy(3,1500,0):cc.moveBy(.8,-300,0);var o=cc.callFunc(function(){e.bulletManager.put(e.node)});this.scheduleOnce(function(){e.node.runAction(cc.sequence(t,o))})},e.prototype.onBeginContact=function(t,e,o){this.node.stopAllActions(),"enemy"===o.node.group&&(this.unscheduleAllCallbacks(),this.anim.stop(),this.bulletManager.put(this.node)),"boundary"===o.node.group&&1===o.tag&&(this.anim.stop(),this.bulletManager.put(this.node))},r([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],BuyShip:[function(t,e,o){"use strict";cc._RF.push(e,"b6678s9KTZN5IYsPb5pm0sq","BuyShip");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buyShipIndex=0,e.price=0,e}return i(e,t),e.prototype.onLoad=function(){return c(this,void 0,void 0,function(){var t,e=this;return a(this,function(){return t=firebase.auth().currentUser,firebase.database().ref("users/"+(null==t?void 0:t.uid)).once("value",function(t){t.exists()?t.val().shipUnLocked[e.buyShipIndex]&&(e.node.getComponent(cc.Button).interactable=!1,e.node.getComponent(cc.Button).node.opacity=150):console.log("User not found")}),[2]})})},e.prototype.start=function(){this.node.getComponent(cc.Button).node.on("click",this.buyShip,this)},e.prototype.buyShip=function(){var t=this,e=firebase.auth().currentUser,o=firebase.database().ref("users/"+(null==e?void 0:e.uid));o.once("value",function(e){if(e.exists()){var n=e.val();n.coins>=t.price?(n.coins-=t.price,n.shipUnLocked[t.buyShipIndex]=!0,o.set(n),cc.director.emit("shipPurchased"),t.node.getComponent(cc.Button).interactable=!1,t.node.getComponent(cc.Button).node.opacity=150):console.log("Not enough coins")}else console.log("User not found")})},r([u],e.prototype,"buyShipIndex",void 0),r([u],e.prototype,"price",void 0),r([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],LobbyManager:[function(t,e,o){"use strict";cc._RF.push(e,"60232OAkCtC9Z+ryMdfZV8X","LobbyManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Canvas=null,e.MainCamera=null,e.PauseBoard=null,e.Loading=null,e.count=0,e}return i(e,t),e.prototype.resumeBGM=function(){cc.audioEngine.resumeMusic()},e.prototype.toggleSettings=function(){this.PauseBoard.active=!this.PauseBoard.active},e.prototype.IncreaseVolume=function(){var t=cc.audioEngine.getMusicVolume();cc.audioEngine.setMusicVolume(t+.1),t>1&&cc.audioEngine.setMusicVolume(1);var e=firebase.auth().currentUser;firebase.database().ref("users/"+(null==e?void 0:e.uid)).update({bgm:t}).then(function(){console.log("BGM saved to Firebase")}).catch(function(t){console.error("Error saving BGM to Firebase:",t)})},e.prototype.increaseVolume_init=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="LobbyManager",t.handler="IncreaseVolume",t.customEventData="foobar",cc.find("Canvas/pause/PlusButtonMsc").getComponent(cc.Button).clickEvents.push(t)},e.prototype.decreaseVolume_init=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="LobbyManager",t.handler="DecreaseVolume",t.customEventData="foobar",cc.find("Canvas/pause/MinusButtonMsc").getComponent(cc.Button).clickEvents.push(t)},e.prototype.DecreaseVolume=function(){var t=cc.audioEngine.getMusicVolume();cc.audioEngine.setMusicVolume(t-.1),t<0&&cc.audioEngine.setMusicVolume(0);var e=firebase.auth().currentUser;firebase.database().ref("users/"+(null==e?void 0:e.uid)).update({bgm:t}).then(function(){console.log("BGM saved to Firebase")}).catch(function(t){console.error("Error saving BGM to Firebase:",t)})},e.prototype.IncreaseFX=function(){var t=cc.audioEngine.getEffectsVolume();cc.audioEngine.setEffectsVolume(t+.1),t>1&&cc.audioEngine.setEffectsVolume(1);var e=firebase.auth().currentUser;firebase.database().ref("users/"+(null==e?void 0:e.uid)).update({sfx:t}).then(function(){console.log("SFX saved to Firebase")}).catch(function(t){console.error("Error saving SFX to Firebase:",t)})},e.prototype.increaseFX_init=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="LobbyManager",t.handler="IncreaseFX",t.customEventData="foobar",cc.find("Canvas/pause/PlusButton").getComponent(cc.Button).clickEvents.push(t)},e.prototype.decreaseFX_init=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="LobbyManager",t.handler="DecreaseFX",t.customEventData="foobar",cc.find("Canvas/pause/MinusButton").getComponent(cc.Button).clickEvents.push(t)},e.prototype.DecreaseFX=function(){var t=cc.audioEngine.getEffectsVolume();cc.audioEngine.setEffectsVolume(t-.1),t<0&&cc.audioEngine.setEffectsVolume(0);var e=firebase.auth().currentUser;firebase.database().ref("users/"+(null==e?void 0:e.uid)).update({sfx:t}).then(function(){console.log("SFX saved to Firebase")}).catch(function(t){console.error("Error saving SFX to Firebase:",t)})},e.prototype.start=function(){this.increaseVolume_init(),this.increaseFX_init(),this.decreaseVolume_init(),this.decreaseFX_init()},e.prototype.onLoad=function(){cc.audioEngine.stopAllEffects(),this.scheduleOnce(function(){this.Loading.active=!1},2)},r([s(cc.Node)],e.prototype,"Canvas",void 0),r([s(cc.Node)],e.prototype,"MainCamera",void 0),r([s(cc.Node)],e.prototype,"PauseBoard",void 0),r([s(cc.Node)],e.prototype,"Loading",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Lobby:[function(t,e,o){"use strict";cc._RF.push(e,"289b5CaQkREsJ4LuIt2M0mf","Lobby");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},c=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=cc._decorator,u=l.ccclass,p=l.property,h=function(){function t(t,e,o){this.attack=t,this.lives=e,this.skill=o}return t.prototype.getAttack=function(){return this.attack},t.prototype.getLives=function(){return this.lives},t.prototype.getSkill=function(){return this.skill},t.original=function(){return new t(3,3,"Attack Buff")},t.plane1=function(){return new t(4,2,"Invincible")},t.plane2=function(){return new t(2,6,"Firerate Buff")},t.plane3=function(){return new t(5,3,"Heal")},t.plane4=function(){return new t(4,4,"Double Damage")},t}(),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shipSprites=[],e.renderShipSprite=null,e.btnLeft=null,e.btnRight=null,e.shopBtn=null,e.stage1Btn=null,e.stage2Btn=null,e.stage3Btn=null,e.loading=null,e.attackLabel=null,e.livesLabel=null,e.skillLabel=null,e.leaderboard=null,e.leaderboardButton=null,e.help=null,e.helpButton=null,e.lives=1e4,e.attack=0,e.skill="",e.currentShipIndex=0,e.availableShip=[!0,!1,!1,!1,!1],e}return i(e,t),e.prototype.onLoad=function(){return a(this,void 0,void 0,function(){var t,e=this;return s(this,function(){return t=firebase.auth().currentUser,firebase.database().ref("users/"+(null==t?void 0:t.uid)).once("value",function(t){if(t.exists()){e.loading.node.active=!1;var o=t.val();e.currentShipIndex=o.selectedShipIndex,e.attackLabel.string="Attack: "+e.attack.toString(),e.livesLabel.string="Lives: "+e.lives.toString(),e.skillLabel.string=e.skill,e.availableShip=o.shipUnLocked,o.stage,e.updateShipDisplay(),e.updateShipStats(),cc.audioEngine.setMusicVolume(o.bgm),cc.audioEngine.setEffectsVolume(o.sfx)}else console.log("User not found")}),[2]})})},e.prototype.start=function(){this.btnLeft.node.on("click",this.leftShip,this),this.btnRight.node.on("click",this.rightShip,this),this.shopBtn.node.on("click",this.openShop,this),this.leaderboardButton.node.on("click",this.openLeaderboard,this),this.helpButton.node.on("click",this.openHelp,this),this.updateShipDisplay(),console.log(this.currentShipIndex)},e.prototype.update=function(){this.attackLabel.string="Attack: "+(999==this.attack?"???":this.attack.toString()),this.livesLabel.string="Lives: "+(999==this.lives?"???":this.lives.toString()),this.skillLabel.string=this.skill},e.prototype.leftShip=function(){this.currentShipIndex--,console.log(this.currentShipIndex),this.currentShipIndex<0&&(this.currentShipIndex=this.shipSprites.length-1),this.updateShipDisplay(),this.updateShipStats()},e.prototype.rightShip=function(){this.currentShipIndex++,console.log(this.currentShipIndex),this.currentShipIndex>=this.shipSprites.length&&(this.currentShipIndex=0),this.updateShipDisplay(),this.updateShipStats()},e.prototype.updateShipDisplay=function(){var t=cc.fadeOut(.3),e=cc.fadeIn(.3);this.renderShipSprite.spriteFrame=this.shipSprites[this.currentShipIndex],this.renderShipSprite.node.color=this.availableShip[this.currentShipIndex]?cc.Color.WHITE:cc.Color.BLACK,this.renderShipSprite.node.stopAllActions(),this.renderShipSprite.node.opacity=0,this.renderShipSprite.node.runAction(cc.sequence(t,cc.delayTime(.1),e))},e.prototype.updateShipStats=function(){if(this.availableShip[this.currentShipIndex])switch(this.currentShipIndex){case 0:this.attack=h.original().getAttack(),this.lives=h.original().getLives(),this.skill=h.original().getSkill();break;case 1:this.attack=h.plane1().getAttack(),this.lives=h.plane1().getLives(),this.skill=h.plane1().getSkill();break;case 2:this.attack=h.plane2().getAttack(),this.lives=h.plane2().getLives(),this.skill=h.plane2().getSkill();break;case 3:this.attack=h.plane3().getAttack(),this.lives=h.plane3().getLives(),this.skill=h.plane3().getSkill();break;case 4:this.attack=h.plane4().getAttack(),this.lives=h.plane4().getLives(),this.skill=h.plane4().getSkill()}else this.attack=999,this.lives=999,this.skill="???"},e.prototype.openShop=function(){cc.director.loadScene("Shop")},e.prototype.openLeaderboard=function(){return a(this,void 0,void 0,function(){var t,e,o,n,i,c,a,l,u;return s(this,function(s){switch(s.label){case 0:return t=firebase.database(),e=t.ref("users"),o=[],[4,e.orderByChild("score").once("value",function(t){t.forEach(function(t){var e=t.key,n=t.val();o.push(r({uid:e},n))}),o.sort(function(t,e){return e.score-t.score}),console.log(o)})];case 1:return s.sent(),n=this.leaderboard.node.getChildByName("Leaderboard Area").getChildByName("first").getChildByName("name"),i=this.leaderboard.node.getChildByName("Leaderboard Area").getChildByName("first").getChildByName("score"),n.getComponent(cc.Label).string=o[0].name,i.getComponent(cc.Label).string=o[0].score,c=this.leaderboard.node.getChildByName("Leaderboard Area").getChildByName("second").getChildByName("name"),a=this.leaderboard.node.getChildByName("Leaderboard Area").getChildByName("second").getChildByName("score"),c.getComponent(cc.Label).string=o[1].name,a.getComponent(cc.Label).string=o[1].score,l=this.leaderboard.node.getChildByName("Leaderboard Area").getChildByName("third").getChildByName("name"),u=this.leaderboard.node.getChildByName("Leaderboard Area").getChildByName("third").getChildByName("score"),l.getComponent(cc.Label).string=o[2].name,u.getComponent(cc.Label).string=o[2].score,this.leaderboard.node.active=!this.leaderboard.node.active,[2]}})})},e.prototype.openHelp=function(){this.help.node.active=!this.help.node.active},e.prototype.toStage=function(t,e){if("1"==e){if(this.availableShip[this.currentShipIndex]){var o=firebase.auth().currentUser;firebase.database().ref("users/"+(null==o?void 0:o.uid)).update({selectedShipIndex:this.currentShipIndex})}cc.director.loadScene("Singleplayer")}else"2"==e&&(this.availableShip[this.currentShipIndex]&&(o=firebase.auth().currentUser,firebase.database().ref("users/"+(null==o?void 0:o.uid)).update({selectedShipIndex:this.currentShipIndex})),cc.director.loadScene("Stage1"))},c([p([cc.SpriteFrame])],e.prototype,"shipSprites",void 0),c([p(cc.Sprite)],e.prototype,"renderShipSprite",void 0),c([p(cc.Button)],e.prototype,"btnLeft",void 0),c([p(cc.Button)],e.prototype,"btnRight",void 0),c([p(cc.Button)],e.prototype,"shopBtn",void 0),c([p(cc.Button)],e.prototype,"stage1Btn",void 0),c([p(cc.Button)],e.prototype,"stage2Btn",void 0),c([p(cc.Button)],e.prototype,"stage3Btn",void 0),c([p(cc.Sprite)],e.prototype,"loading",void 0),c([p(cc.Label)],e.prototype,"attackLabel",void 0),c([p(cc.Label)],e.prototype,"livesLabel",void 0),c([p(cc.Label)],e.prototype,"skillLabel",void 0),c([p(cc.Sprite)],e.prototype,"leaderboard",void 0),c([p(cc.Button)],e.prototype,"leaderboardButton",void 0),c([p(cc.Sprite)],e.prototype,"help",void 0),c([p(cc.Button)],e.prototype,"helpButton",void 0),c([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{}],Menu:[function(t,e,o){"use strict";cc._RF.push(e,"e0059PMnp5ANLmvXhMydAKz","Menu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.signupButton=null,e.signupCloseButton=null,e.loginButton=null,e.loginCloseButton=null,e.signupSprite=null,e.loginSprite=null,e.signupEmail=null,e.signupPassword=null,e.signupUsername=null,e.loginEmail=null,e.loginPassword=null,e.signupSubmitButton=null,e.loginSubmitButton=null,e}return i(e,t),e.prototype.start=function(){this.signupButton.node.on("click",this.onSignupClick,this),this.signupCloseButton.node.on("click",this.onSignupCloseClick,this),this.loginButton.node.on("click",this.onLoginClick,this),this.loginCloseButton.node.on("click",this.onLoginCloseClick,this),this.signupSubmitButton.node.on("click",this.firebaseSignup,this),this.loginSubmitButton.node.on("click",this.firebaseLogin,this)},e.prototype.onSignupClick=function(){this.signupSprite.node.active=!0},e.prototype.onSignupCloseClick=function(){this.signupSprite.node.active=!1},e.prototype.onLoginClick=function(){this.loginSprite.node.active=!0},e.prototype.onLoginCloseClick=function(){this.loginSprite.node.active=!1},e.prototype.firebaseSignup=function(){var t,e;return c(this,void 0,void 0,function(){var o,n;return a(this,function(i){switch(i.label){case 0:if(""==this.signupEmail.string||""==this.signupPassword.string||""==this.signupUsername.string)return console.log("return done"),[2];console.log("return passed"),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,firebase.auth().createUserWithEmailAndPassword(this.signupEmail.string,this.signupPassword.string)];case 2:return o=i.sent(),[4,null===(t=o.user)||void 0===t?void 0:t.updateProfile({displayName:this.signupUsername.string})];case 3:return i.sent(),firebase.database().ref("users/"+(null===(e=o.user)||void 0===e?void 0:e.uid)).set({coins:0,score:0,selectedShipIndex:0,shipUnLocked:[!0,!1,!1,!1,!1],stage:[!0,!1,!1],bgm:1,sfx:1,name:this.signupUsername.string}),this.signupSprite.node.active=!1,this.signupEmail.string="",this.signupPassword.string="",this.signupUsername.string="",[3,5];case 4:return n=i.sent(),console.log(n),[3,5];case 5:return[2]}})})},e.prototype.firebaseLogin=function(){return c(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:if(""==this.loginEmail.string||""==this.loginPassword.string)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,firebase.auth().signInWithEmailAndPassword(this.loginEmail.string,this.loginPassword.string)];case 2:return e.sent(),firebase.auth().onAuthStateChanged(function(t){t?(console.log("Signed in as "+t.displayName),cc.director.loadScene("Lobby")):console.log("No user signed in")}),[3,4];case 3:return t=e.sent(),console.log(t),[3,4];case 4:return[2]}})})},r([u(cc.Button)],e.prototype,"signupButton",void 0),r([u(cc.Button)],e.prototype,"signupCloseButton",void 0),r([u(cc.Button)],e.prototype,"loginButton",void 0),r([u(cc.Button)],e.prototype,"loginCloseButton",void 0),r([u(cc.Sprite)],e.prototype,"signupSprite",void 0),r([u(cc.Sprite)],e.prototype,"loginSprite",void 0),r([u(cc.EditBox)],e.prototype,"signupEmail",void 0),r([u(cc.EditBox)],e.prototype,"signupPassword",void 0),r([u(cc.EditBox)],e.prototype,"signupUsername",void 0),r([u(cc.EditBox)],e.prototype,"loginEmail",void 0),r([u(cc.EditBox)],e.prototype,"loginPassword",void 0),r([u(cc.Button)],e.prototype,"signupSubmitButton",void 0),r([u(cc.Button)],e.prototype,"loginSubmitButton",void 0),r([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"73f48CSxLRFmr1NbrMiMp0+","Player");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,u=s.property,p=function(){function t(t,e,o){this.attack=t,this.lives=e,this.skill=o}return t.prototype.getAttack=function(){return this.attack},t.prototype.getLives=function(){return this.lives},t.prototype.getSkill=function(){return this.skill},t.original=function(){return new t(3,3,"Attack Buff")},t.plane1=function(){return new t(4,2,"Invincible")},t.plane2=function(){return new t(2,6,"Firerate Buff")},t.plane3=function(){return new t(5,3,"Heal")},t.plane4=function(){return new t(4,4,"Double Damage")},t}(),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rebornPos=cc.v2(0,0),e.shipSprites=[],e.shipCollider=[],e.mainCollider=null,e.itemSprite=null,e.cooldownOverlay=null,e.playerNo=0,e.shoot_music=null,e.player_die=null,e.skill_effect=null,e.cooldown=!1,e.lives=1e4,e.attack=0,e.skill="",e.bulletanim="",e.firerate=.3,e.duration=10,e.item=!1,e.bulletPrefab=null,e.bulletPool=null,e.wDown=!1,e.aDown=!1,e.sDown=!1,e.dDown=!1,e.kDown=!1,e.iDown=!1,e.playerSpeed=150,e.isDead=!1,e.isReborn=!1,e.once=!1,e.rebornTime=2,e.spaceDown=!1,e.anim=null,e.animateState=null,e.currentShipIndex=0,e.timed=0,e}return i(e,t),e.prototype.onLoad=function(){return c(this,void 0,void 0,function(){var t,e,o,n=this;return a(this,function(){for(this.anim=this.getComponent(cc.Animation),cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.bulletPool=new cc.NodePool("Bullet"),t=0;t<50;t++)e=cc.instantiate(this.bulletPrefab),this.bulletPool.put(e);return o=firebase.auth().currentUser,firebase.database().ref("users/"+(null==o?void 0:o.uid)).once("value",function(t){if(t.exists()){var e=t.val();n.currentShipIndex=e.selectedShipIndex,e.stage,n.getComponent(cc.Sprite).spriteFrame=n.shipSprites[n.currentShipIndex],n.getComponent(cc.PhysicsPolygonCollider).points=n.shipCollider[n.currentShipIndex].points,n.getComponent(cc.PhysicsPolygonCollider).apply(),0==n.currentShipIndex?(n.lives=p.original().getLives(),n.attack=p.original().getAttack(),n.skill=p.original().getSkill(),n.bulletanim="bullet"):1==n.currentShipIndex?(n.lives=p.plane1().getLives(),n.attack=p.plane1().getAttack(),n.skill=p.plane1().getSkill(),n.bulletanim="bullet1"):2==n.currentShipIndex?(n.lives=p.plane2().getLives(),n.attack=p.plane2().getAttack(),n.skill=p.plane2().getSkill(),n.bulletanim="bullet2"):3==n.currentShipIndex?(n.lives=p.plane3().getLives(),n.attack=p.plane3().getAttack(),n.skill=p.plane3().getSkill(),n.bulletanim="bullet3"):4==n.currentShipIndex&&(n.lives=p.plane4().getLives(),n.attack=p.plane4().getAttack(),n.skill=p.plane4().getSkill(),n.bulletanim="bullet4")}}),[2]})})},e.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.update=function(t){this.playerMovement(t),this.playerReborn(t),this.playerAnimation(),this.playerUtil(),this.coolDown(t)},e.prototype.onKeyDown=function(t){t.keyCode==cc.macro.KEY.k&&(this.kDown=!0),t.keyCode==cc.macro.KEY.i&&(this.iDown=!0),0==this.playerNo?(t.keyCode==cc.macro.KEY.w&&(this.wDown=!0),t.keyCode==cc.macro.KEY.a&&(this.aDown=!0),t.keyCode==cc.macro.KEY.s&&(this.sDown=!0),t.keyCode==cc.macro.KEY.d&&(this.dDown=!0),t.keyCode!=cc.macro.KEY.space||this.once||(this.spaceDown=!0)):1==this.playerNo&&(t.keyCode==cc.macro.KEY.up&&(this.wDown=!0),t.keyCode==cc.macro.KEY.left&&(this.aDown=!0),t.keyCode==cc.macro.KEY.down&&(this.sDown=!0),t.keyCode==cc.macro.KEY.right&&(this.dDown=!0),t.keyCode!=cc.macro.KEY.shift||this.once||(this.spaceDown=!0))},e.prototype.onKeyUp=function(t){t.keyCode==cc.macro.KEY.k&&(this.kDown=!1),t.keyCode==cc.macro.KEY.i&&(this.iDown=!1),0==this.playerNo?(t.keyCode==cc.macro.KEY.w&&(this.wDown=!1),t.keyCode==cc.macro.KEY.a&&(this.aDown=!1),t.keyCode==cc.macro.KEY.s&&(this.sDown=!1),t.keyCode==cc.macro.KEY.d&&(this.dDown=!1),t.keyCode==cc.macro.KEY.space&&(this.spaceDown=!1,this.once=!1,this.unschedule(this.createBullet),cc.audioEngine.stopEffect(this.audioID))):1==this.playerNo&&(t.keyCode==cc.macro.KEY.up&&(this.wDown=!1),t.keyCode==cc.macro.KEY.left&&(this.aDown=!1),t.keyCode==cc.macro.KEY.down&&(this.sDown=!1),t.keyCode==cc.macro.KEY.right&&(this.dDown=!1),t.keyCode==cc.macro.KEY.shift&&(this.spaceDown=!1,this.once=!1,this.unschedule(this.createBullet),this.scheduleOnce(function(){cc.audioEngine.stopEffect(this.audioID)},.3)))},e.prototype.getItem=function(){0==this.item&&(this.item=!0,this.itemSprite.active=!0)},e.prototype.coolDown=function(t){1==this.cooldown&&(this.timed+=t,this.cooldownOverlay.height=this.timed/15*50,this.timed>=15&&(this.timed=15))},e.prototype.playerUtil=function(){var t=this;!this.cooldown&&this.kDown&&(cc.audioEngine.playEffect(this.skill_effect,!1),this.cooldown=!0,this.scheduleOnce(function(){this.cooldown=!1,this.cooldownOverlay.height=0,this.timed=0},15),"Attack Buff"==this.skill?(this.attack+=1,this.scheduleOnce(function(){this.attack-=1},this.duration)):"Invincible"==this.skill?(this.isReborn=!0,this.anim.play("hit"),this.mainCollider.enabled=!1,this.scheduleOnce(function(){t.isReborn=!1,t.anim.stop("hit"),t.mainCollider.enabled=!0},5)):"Firerate Buff"==this.skill?(this.firerate-=.15,this.once=!1,this.scheduleOnce(function(){this.firerate+=.15,this.once=!1},this.duration)):"Heal"==this.skill?this.lives+=1:"Double Damage"==this.skill&&(this.attack*=2,this.scheduleOnce(function(){this.attack/=2},this.duration))),this.iDown&&1==this.item&&(this.lives+=1,this.item=!1,this.itemSprite.active=!1)},e.prototype.playerMovement=function(t){this.aDown?this.node.x-=this.playerSpeed*t:this.dDown&&(this.node.x+=this.playerSpeed*t),this.wDown?this.node.y+=2*this.playerSpeed/3*t:this.sDown&&(this.node.y-=2*this.playerSpeed/3*t),this.node.x<-cc.winSize.width/2+this.node.width/2?this.node.x=-cc.winSize.width/2+this.node.width/2:this.node.x>cc.winSize.width/2-this.node.width/2&&(this.node.x=cc.winSize.width/2-this.node.width/2),this.node.y<this.node.height/2-320?this.node.y=this.node.height/2-320:this.node.y>265-this.node.height/2&&(this.node.y=265-this.node.height/2)},e.prototype.playerReborn=function(){var t=this;this.isDead&&!this.isReborn&&this.lives>0?(this.isReborn=!0,this.lives--,cc.audioEngine.playEffect(this.player_die,!1),cc.find("StageManager").getComponent("StageManager").health=this.lives,this.anim.play("hit"),this.getComponent(cc.PhysicsPolygonCollider).enabled=!1,this.scheduleOnce(function(){t.isReborn=!1,t.isDead=!1,t.anim.stop("hit"),t.getComponent(cc.PhysicsPolygonCollider).enabled=!0},this.rebornTime)):this.lives||(0==this.playerNo&&cc.find("StageManager").getComponent("StageManager").gameOver(),this.node.active=!1,cc.audioEngine.stopEffect(this.audioID))},e.prototype.playerAnimation=function(){this.spaceDown&&!this.once&&(this.once=!0,this.createBullet(),this.schedule(this.createBullet,this.firerate),this.audioID=cc.audioEngine.playEffect(this.shoot_music,!0)),(this.wDown||this.sDown)&&this.anim.playAdditive("player_updown"),this.dDown&&this.anim.playAdditive("player_acc")},e.prototype.onBeginContact=function(t,e,o){"enemy"!=o.node.group&&"B_enemy"!=o.node.group||this.isReborn||(this.isDead=!0)},e.prototype.createBullet=function(){var t=null;this.bulletPool.size()>0&&(t=this.bulletPool.get(this.bulletPool)),null!=t&&t.getComponent("Bullet").init(this.node,this.bulletanim,this.attack)},r([u()],e.prototype,"rebornPos",void 0),r([u([cc.SpriteFrame])],e.prototype,"shipSprites",void 0),r([u([cc.PolygonCollider])],e.prototype,"shipCollider",void 0),r([u(cc.PhysicsPolygonCollider)],e.prototype,"mainCollider",void 0),r([u(cc.Node)],e.prototype,"itemSprite",void 0),r([u(cc.Node)],e.prototype,"cooldownOverlay",void 0),r([u()],e.prototype,"playerNo",void 0),r([u(cc.AudioClip)],e.prototype,"shoot_music",void 0),r([u(cc.AudioClip)],e.prototype,"player_die",void 0),r([u(cc.AudioClip)],e.prototype,"skill_effect",void 0),r([u(cc.Prefab)],e.prototype,"bulletPrefab",void 0),r([u],e.prototype,"playerSpeed",void 0),r([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],Shop:[function(t,e,o){"use strict";cc._RF.push(e,"a7c53YDG11BbJDrQJgxrvss","Shop");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.backButton=null,e.coinsQuantity=null,e.loading=null,e}return i(e,t),e.prototype.onLoad=function(){return c(this,void 0,void 0,function(){var t,e=this;return a(this,function(){return cc.director.on("shipPurchased",this.updateCoinsQuantity,this),t=firebase.auth().currentUser,firebase.database().ref("users/"+(null==t?void 0:t.uid)).once("value",function(t){if(t.exists()){e.loading.node.active=!1;var o=t.val();e.coinsQuantity.string="Coins: "+o.coins}else console.log("User not found")}),[2]})})},e.prototype.updateCoinsQuantity=function(){var t=this,e=firebase.auth().currentUser;firebase.database().ref("users/"+(null==e?void 0:e.uid)).once("value",function(e){if(e.exists()){var o=e.val();t.coinsQuantity.string="Coins: "+o.coins}else console.log("User not found")})},e.prototype.start=function(){this.backButton.node.on("click",this.onBackClick,this)},e.prototype.onBackClick=function(){cc.director.loadScene("Lobby")},r([u(cc.Button)],e.prototype,"backButton",void 0),r([u(cc.Label)],e.prototype,"coinsQuantity",void 0),r([u(cc.Sprite)],e.prototype,"loading",void 0),r([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],StageManager:[function(t,e,o){"use strict";cc._RF.push(e,"18c6fBNIh9HmLDS2JVEaM5L","StageManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stageLabel=null,e.stageName="Stage 1",e.healthLabel=null,e.health=3,e.scoreLabel=null,e.score=0,e.loading=null,e.player=null,e.player1=null,e.enemy=null,e.gameover=null,e.gameoverScore=null,e.bulletPrefab=null,e.bgm=null,e.Canvas=null,e.MainCamera=null,e.PauseBoard=null,e.backgroundMusic=null,e.lobbyMusic=null,e.gameover_music=null,e.audioSource=null,e.count=0,e.bulletPool=new cc.NodePool("Bullet"),e}return i(e,t),e.prototype.giveItem=function(){this.player.getComponent("Player").getItem(),this.player1.getComponent("Player").getItem()},e.prototype.gameOver=function(){cc.audioEngine.playEffect(this.gameover_music,!1),this.gameover.active=!0,this.enemy.active=!1,this.gameoverScore.getComponent(cc.Label).string=this.scoreLabel.string,this.scheduleOnce(function(){cc.director.loadScene("Lobby")},3),this.saveScoreToFirebase(this.score)},e.prototype.onLoad=function(){for(var t=0;t<100;t++){var e=cc.instantiate(this.bulletPrefab);this.bulletPool.put(e)}this.scheduleOnce(function(){this.loading.active=!1,this.enemy.active=!0},2)},e.prototype.playBGM=function(){cc.audioEngine.playMusic(this.bgm,!0)},e.prototype.resumeBGM=function(){cc.audioEngine.resumeMusic()},e.prototype.Toggle_init=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="StageManager",t.handler="Pause",t.customEventData="foobar",cc.find("Canvas/level1/UI/Pausebtn").getComponent(cc.Button).clickEvents.push(t)},e.prototype.resume_init=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="StageManager",t.handler="Resume",t.customEventData="foobar",cc.find("pause/Continue").getComponent(cc.Button).clickEvents.push(t);var e=new cc.Component.EventHandler;e.target=this.node,e.component="StageManager",e.handler="Quit",e.customEventData="foobar",cc.find("pause/Quit").getComponent(cc.Button).clickEvents.push(e)},e.prototype.Resume=function(){this.count=0,this.enemy.active=!0,this.PauseBoard.active=!1,cc.director.resume(),this.resumeBGM()},e.prototype.Quit=function(t,e){this.count=0,this.Resume(t,e),this.saveScoreToFirebase(this.score),cc.director.loadScene("Lobby")},e.prototype.Pause=function(){this.enemy.active=!1,this.count++,cc.audioEngine.stopAllEffects(),1==this.count&&(this.PauseBoard.active=!0,this.resume_init(),cc.director.pause())},e.prototype.IncreaseVolume=function(){var t=cc.audioEngine.getMusicVolume();cc.audioEngine.setMusicVolume(t+.1),t>1&&cc.audioEngine.setMusicVolume(1);var e=firebase.auth().currentUser;firebase.database().ref("users/"+(null==e?void 0:e.uid)).update({bgm:t}).then(function(){console.log("BGM saved to Firebase")}).catch(function(t){console.error("Error saving BGM to Firebase:",t)})},e.prototype.increaseVolume_init=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="StageManager",t.handler="IncreaseVolume",t.customEventData="foobar",cc.find("pause/PlusButtonMsc").getComponent(cc.Button).clickEvents.push(t)},e.prototype.decreaseVolume_init=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="StageManager",t.handler="DecreaseVolume",t.customEventData="foobar",cc.find("pause/MinusButtonMsc").getComponent(cc.Button).clickEvents.push(t)},e.prototype.DecreaseVolume=function(){var t=cc.audioEngine.getMusicVolume();cc.audioEngine.setMusicVolume(t-.1),t<0&&cc.audioEngine.setMusicVolume(0);var e=firebase.auth().currentUser;firebase.database().ref("users/"+(null==e?void 0:e.uid)).update({bgm:t}).then(function(){console.log("BGM saved to Firebase")}).catch(function(t){console.error("Error saving BGM to Firebase:",t)})},e.prototype.IncreaseFX=function(){var t=cc.audioEngine.getEffectsVolume();cc.audioEngine.setEffectsVolume(t+.1),t>1&&cc.audioEngine.setEffectsVolume(1);var e=firebase.auth().currentUser;firebase.database().ref("users/"+(null==e?void 0:e.uid)).update({sfx:t}).then(function(){console.log("SFX saved to Firebase")}).catch(function(t){console.error("Error saving SFX to Firebase:",t)})},e.prototype.increaseFX_init=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="StageManager",t.handler="IncreaseFX",t.customEventData="foobar",cc.find("pause/PlusButton").getComponent(cc.Button).clickEvents.push(t)},e.prototype.decreaseFX_init=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="StageManager",t.handler="DecreaseFX",t.customEventData="foobar",cc.find("pause/MinusButton").getComponent(cc.Button).clickEvents.push(t)},e.prototype.DecreaseFX=function(){var t=cc.audioEngine.getEffectsVolume();cc.audioEngine.setEffectsVolume(t-.1),t<0&&cc.audioEngine.setEffectsVolume(0);var e=firebase.auth().currentUser;firebase.database().ref("users/"+(null==e?void 0:e.uid)).update({sfx:t}).then(function(){console.log("SFX saved to Firebase")}).catch(function(t){console.error("Error saving SFX to Firebase:",t)})},e.prototype.start=function(){this.playBGM(),this.Toggle_init(),this.increaseVolume_init(),this.increaseFX_init(),this.decreaseVolume_init(),this.decreaseFX_init(),this.stageLabel.string=this.stageName,this.healthLabel.string="HP X "+this.player.getComponent("Player").lives.toString(),this.scoreLabel.string="Score: "+this.score.toString()},e.prototype.update=function(){this.healthLabel.string="HP X "+this.player.getComponent("Player").lives.toString(),this.scoreLabel.string="Score: "+this.score.toString()},e.prototype.saveScoreToFirebase=function(t){var e=firebase.auth().currentUser,o=firebase.database().ref("users/"+(null==e?void 0:e.uid));o.once("value",function(e){var n=e.val(),i=n.score;i<t&&(i=t);var r=n.coins+.1*t;o.update({score:i,coins:r}).then(function(){console.log("Score saved to Firebase")}).catch(function(t){console.error("Error saving score to Firebase:",t)})})},r([s(cc.Label)],e.prototype,"stageLabel",void 0),r([s],e.prototype,"stageName",void 0),r([s(cc.Label)],e.prototype,"healthLabel",void 0),r([s],e.prototype,"health",void 0),r([s(cc.Label)],e.prototype,"scoreLabel",void 0),r([s],e.prototype,"score",void 0),r([s(cc.Node)],e.prototype,"loading",void 0),r([s(cc.Node)],e.prototype,"player",void 0),r([s(cc.Node)],e.prototype,"player1",void 0),r([s(cc.Node)],e.prototype,"enemy",void 0),r([s(cc.Node)],e.prototype,"gameover",void 0),r([s(cc.Node)],e.prototype,"gameoverScore",void 0),r([s(cc.Prefab)],e.prototype,"bulletPrefab",void 0),r([s({type:cc.AudioClip})],e.prototype,"bgm",void 0),r([s(cc.Node)],e.prototype,"Canvas",void 0),r([s(cc.Node)],e.prototype,"MainCamera",void 0),r([s(cc.Node)],e.prototype,"PauseBoard",void 0),r([s(cc.AudioClip)],e.prototype,"backgroundMusic",void 0),r([s(cc.AudioClip)],e.prototype,"lobbyMusic",void 0),r([s(cc.AudioClip)],e.prototype,"gameover_music",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],bgm_lobby_2:[function(t,e,o){"use strict";cc._RF.push(e,"0f221qwsYBDcqTiwehUu/Wm","bgm_lobby_2");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stageManager=null,e}return i(e,t),e.prototype.onLoad=function(){var t=cc.find("AudioManager");this.stageManager=t.getComponent(StageManager),this.stageManager.pauseBackgroundMusic()},r([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],bgm_lobby:[function(t,e,o){"use strict";cc._RF.push(e,"cb244gh2c9DtZTXYYVFioMW","bgm_lobby");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.backgroundMusic=null,e}return i(e,t),e.prototype.onLoad=function(){cc.audioEngine.playMusic(this.backgroundMusic,!0)},r([s(cc.AudioClip)],e.prototype,"backgroundMusic",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],enemy_1:[function(t,e,o){"use strict";cc._RF.push(e,"03e46hV9wxI8qun3cuppLGI","enemy_1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enemyPrefab=null,e.enemyPrefab2=null,e.enemyPrefab3=null,e.enemyPool=null,e.isAlive=!1,e.respawnScheduler=null,e.previousPlayerPosition=null,e}return i(e,t),e.prototype.onLoad=function(){this.isAlive=!1,this.enemyPool=new cc.NodePool;for(var t=null,e=0;e<100;e++){var o=Math.random();t=o<.3?cc.instantiate(this.enemyPrefab):o<.7?cc.instantiate(this.enemyPrefab2):cc.instantiate(this.enemyPrefab3),this.enemyPool.put(t)}},e.prototype.start=function(){this.init()},e.prototype.init=function(){this.setInitialPosition(),this.spawn(),this.showPlayer()},e.prototype.setInitialPosition=function(){this.node.setPosition(cc.v2(0,0))},e.prototype.showPlayer=function(){},e.prototype.pooling=function(t){this.enemyPool.put(t)},e.prototype.spawn=function(){var t=this;this.isAlive=!0;var e=4,o=1,n=0,i=function(){t.scheduleOnce(function(){n<10?(t.spawnMultiple(e),n+=++e):t.spawnMultiple(10),o=5,i()},o)};i()},e.prototype.spawnMultiple=function(t){for(var e=0;e<t;e++){var o=460*Math.random()+50,n=300*Math.random()+600,i=null,r=Math.random();r<.3?this.enemyPool.size()>0?(i=this.enemyPool.get()).setPosition(cc.v2(n,o)):(i=cc.instantiate(this.enemyPrefab)).setPosition(cc.v2(n,o)):r<.7?this.enemyPool.size()>0?(i=this.enemyPool.get()).setPosition(cc.v2(n,o)):(i=cc.instantiate(this.enemyPrefab2)).setPosition(cc.v2(n,o)):this.enemyPool.size()>0?(i=this.enemyPool.get()).setPosition(cc.v2(n,o)):(i=cc.instantiate(this.enemyPrefab3)).setPosition(cc.v2(n,o)),this.node.addChild(i),this.moveEnemy(i)}},e.prototype.moveEnemy=function(t){var e=this,o=cc.delayTime(1),n=4*Math.random()+2,i=cc.moveBy(n,cc.v2(-1e3,0)),r=cc.callFunc(function(){t.position.x<=-50&&(t.removeFromParent(),e.enemyPool.put(t))}),c=cc.sequence(o,i,r);t.runAction(c)},r([s({type:cc.Prefab})],e.prototype,"enemyPrefab",void 0),r([s({type:cc.Prefab})],e.prototype,"enemyPrefab2",void 0),r([s({type:cc.Prefab})],e.prototype,"enemyPrefab3",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],"enemy_shoot_prefab - 002":[function(t,e,o){"use strict";cc._RF.push(e,"3cccez3QvJA85StbW3pWnbw","enemy_shoot_prefab - 002");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletPrefab=null,e.die_sound=null,e.idle_anim=null,e.type=0,e.enemyHP=8,e.enemyShootInterval=1.5,e.minBulletCount=1,e.maxBulletCount=3,e.stageManager=null,e.bullet=null,e.first=!1,e.isDying=!1,e}return i(e,t),e.prototype.onLoad=function(){this.scheduleShoot(),this.stageManager=cc.find("StageManager").getComponent("StageManager")},e.prototype.scheduleShoot=function(){var t=this;this.schedule(function(){t.shoot()},this.enemyShootInterval)},e.prototype.shoot=function(){for(var t,e,o=this,n=(t=this.minBulletCount,e=this.maxBulletCount,Math.floor(Math.random()*(e-t+1))+t),i=0;i<n;i++){this.stageManager.bulletPool.size()>0?this.bullet=this.stageManager.bulletPool.get():this.bullet=cc.instantiate(this.bulletPrefab),this.bullet.setPosition(this.node.position);var r=Math.random()*Math.PI*2,c=cc.v2(Math.cos(r),Math.sin(r)),a=c.mul(1e3),s=cc.v3(-1e3,this.bullet.position.y),l=(this.bullet.position.sub(s).mag()+500)/500,u=cc.moveTo(l,a),p=cc.callFunc(function(){o.stageManager.bulletPool.put(o.bullet)});this.bullet.runAction(cc.sequence(u,p));var h=Math.atan2(c.y,c.x),d=cc.misc.radiansToDegrees(h);this.bullet.angle=-d,this.node.parent.addChild(this.bullet)}},e.prototype.onBeginContact=function(t,e,o){if("B_player"===o.node.group&&!this.first){this.first=!0;var n=o.getComponent("Bullet").attack;if(this.enemyHP-=n,this.scheduleOnce(function(){this.first=!1},.05),this.enemyHP<=0&&!this.isDying){this.isDying=!0,this.getComponent(cc.PhysicsChainCollider).enabled=!1;var i=this.getComponent(cc.Animation),r=i.play("enemy_die");cc.audioEngine.playEffect(this.die_sound,!1),this.stageManager.score+=500,Math.random()<.1&&this.stageManager.giveItem(),this.scheduleOnce(function(){this.node.isDead=!1,this.enemyHP=8;var t=cc.find("New Node");2==this.type?i.play("enemy_2_idle"):3==this.type&&i.play("enemy_3_idle"),t.getComponent("enemy_1").pooling(this.node,this.enemyHP,8),this.isDying=!1,this.getComponent(cc.Sprite).spriteFrame=this.originalSpriteFrame,this.getComponent(cc.PhysicsChainCollider).enabled=!0},r.duration)}}},r([s({type:cc.Prefab})],e.prototype,"bulletPrefab",void 0),r([s(cc.AudioClip)],e.prototype,"die_sound",void 0),r([s(cc.AnimationClip)],e.prototype,"idle_anim",void 0),r([s()],e.prototype,"type",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],enemy_shoot_prefab:[function(t,e,o){"use strict";cc._RF.push(e,"d46e0vldT9HFacH24oKTR8L","enemy_shoot_prefab");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bulletPrefab=null,e.die_sound=null,e.idle_anim=null,e.enemyHP=8,e.enemyShootInterval=1.5,e.minBulletCount=1,e.maxBulletCount=3,e.stageManager=null,e.bullet=null,e.first=!1,e.isDying=!1,e}return i(e,t),e.prototype.onLoad=function(){this.scheduleShoot(),this.stageManager=cc.find("StageManager").getComponent("StageManager")},e.prototype.scheduleShoot=function(){var t=this;this.schedule(function(){t.shoot()},this.enemyShootInterval)},e.prototype.shoot=function(){for(var t,e,o=this,n=(t=this.minBulletCount,e=this.maxBulletCount,Math.floor(Math.random()*(e-t+1))+t),i=0;i<n;i++){this.stageManager.bulletPool.size()>0?this.bullet=this.stageManager.bulletPool.get():this.bullet=cc.instantiate(this.bulletPrefab),this.bullet.setPosition(this.node.position);var r=Math.random()*Math.PI*2,c=cc.v2(Math.cos(r),Math.sin(r)),a=c.mul(1e3),s=cc.v3(-1e3,this.bullet.position.y),l=(this.bullet.position.sub(s).mag()+500)/500,u=cc.moveTo(l,a),p=cc.callFunc(function(){o.stageManager.bulletPool.put(o.bullet)});this.bullet.runAction(cc.sequence(u,p));var h=Math.atan2(c.y,c.x),d=cc.misc.radiansToDegrees(h);this.bullet.angle=-d,this.node.parent.addChild(this.bullet)}},e.prototype.onBeginContact=function(t,e,o){if("B_player"===o.node.group&&!this.first){this.first=!0;var n=o.getComponent("Bullet").attack;if(this.enemyHP-=n,this.scheduleOnce(function(){this.first=!1},.05),this.enemyHP<=0&&!this.isDying){this.isDying=!0,this.getComponent(cc.PhysicsChainCollider).enabled=!1;var i=this.getComponent(cc.Animation),r=i.play("enemy_die");cc.audioEngine.playEffect(this.die_sound,!1),this.stageManager.score+=100,Math.random()<.1&&this.stageManager.giveItem(),this.scheduleOnce(function(){this.node.isDead=!1,this.enemyHP=4;var t=cc.find("New Node");i.play("enemy_1_idle"),t.getComponent("enemy_1").pooling(this.node,this.enemyHP,4),this.isDying=!1,this.getComponent(cc.Sprite).spriteFrame=this.originalSpriteFrame,this.getComponent(cc.PhysicsChainCollider).enabled=!0},r.duration)}}},r([s({type:cc.Prefab})],e.prototype,"bulletPrefab",void 0),r([s(cc.AudioClip)],e.prototype,"die_sound",void 0),r([s(cc.AnimationClip)],e.prototype,"idle_anim",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],level_1:[function(t,e,o){"use strict";cc._RF.push(e,"3be62qdMgBFapOq0IFd4JR6","level_1");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgm=null,e.touch_coin=null,e.victory=null,e.Canvas=null,e.MainCamera=null,e.PauseBoard=null,e.count=0,e}return i(e,t),e.prototype.playBGM=function(){cc.audioEngine.playMusic(this.bgm,!0)},e.prototype.resumeBGM=function(){cc.audioEngine.resumeMusic()},e.prototype.Toggle_init=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="level_1",t.handler="Pause",t.customEventData="foobar",cc.find("Canvas/Main Camera/level1/UI/Pausebtn").getComponent(cc.Button).clickEvents.push(t)},e.prototype.resume_init=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="level_1",t.handler="Resume",t.customEventData="foobar",cc.find("Canvas/pause/Continue").getComponent(cc.Button).clickEvents.push(t);var e=new cc.Component.EventHandler;e.target=this.node,e.component="level_1",e.handler="Quit",e.customEventData="foobar",cc.find("Canvas/pause/Quit").getComponent(cc.Button).clickEvents.push(e)},e.prototype.Resume=function(){this.count=0,cc.find("Canvas/pause").destroy(),cc.director.resume(),this.resumeBGM()},e.prototype.Quit=function(){this.count=0,cc.find("Canvas/pause").destroy(),cc.director.loadScene("setting")},e.prototype.Pause=function(){if(this.count++,1==this.count){var t=cc.instantiate(this.PauseBoard);this.Canvas.addChild(t),t.setPosition(this.MainCamera.x,this.MainCamera.y),this.resume_init(),cc.director.pause()}},e.prototype.IncreaseVolume=function(){var t=cc.audioEngine.getMusicVolume();t<1&&cc.audioEngine.setMusicVolume(t+2)},e.prototype.increaseVolume_init=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="level_1",t.handler="IncreaseVolume",t.customEventData="foobar",cc.find("Canvas/pause/PlusButton").getComponent(cc.Button).clickEvents.push(t)},e.prototype.start=function(){this.playBGM(),this.Toggle_init(),this.increaseVolume_init()},r([s({type:cc.AudioClip})],e.prototype,"bgm",void 0),r([s({type:cc.AudioClip})],e.prototype,"touch_coin",void 0),r([s({type:cc.AudioClip})],e.prototype,"victory",void 0),r([s(cc.Node)],e.prototype,"Canvas",void 0),r([s(cc.Node)],e.prototype,"MainCamera",void 0),r([s(cc.Prefab)],e.prototype,"PauseBoard",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],op_video_control:[function(t,e,o){"use strict";cc._RF.push(e,"9078cAhFU9Gh5L9Ll+UJ+/1","op_video_control");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.videoPlayer=null,e.bgm=null,e}return i(e,t),e.prototype.playVideo=function(){this.videoPlayer.play(),cc.audioEngine.playMusic(this.bgm,!0)},e.prototype.onVideoCompleted=function(){cc.director.loadScene("Main Menu")},e.prototype.start=function(){this.videoPlayer.node.on("ready-to-play",this.playVideo,this),this.videoPlayer.node.on("completed",this.onVideoCompleted,this)},r([s(cc.VideoPlayer)],e.prototype,"videoPlayer",void 0),r([s(cc.AudioClip)],e.prototype,"bgm",void 0),r([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}]},{},["BackgroundScroll","Bullet enemy","Bullet","BuyShip","Lobby","LobbyManager","Menu","Player","Shop","StageManager","bgm_lobby","bgm_lobby_2","enemy_1","enemy_shoot_prefab - 002","enemy_shoot_prefab","level_1","op_video_control"]);